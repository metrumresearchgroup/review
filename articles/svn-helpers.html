<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>SVN Helpers • review</title>
<!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.7.1/jquery.min.js" integrity="sha512-v2CJ7UaYy4JwqLDIrZUI/4hqeoQieOmAZNXBeQyjo21dadnwR+8ZaIJVT8EE2iyI61OV8e6M8PP2/4hpQINQ/g==" crossorigin="anonymous" referrerpolicy="no-referrer"></script><!-- Bootstrap --><link href="https://cdnjs.cloudflare.com/ajax/libs/bootswatch/3.4.0/flatly/bootstrap.min.css" rel="stylesheet" crossorigin="anonymous">
<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script><!-- bootstrap-toc --><link rel="stylesheet" href="../bootstrap-toc.css">
<script src="../bootstrap-toc.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous">
<!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- pkgdown --><link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script><meta property="og:title" content="SVN Helpers">
<meta property="og:description" content="review">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body data-spy="scroll" data-target="#toc">
    

    <div class="container template-article">
      <header><div class="navbar navbar-inverse navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">review</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="">3.8.1</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
<li>
  <a href="../reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" data-bs-toggle="dropdown" aria-expanded="false">
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
<li>
      <a href="../articles/getting-started.html">Getting Started with review</a>
    </li>
    <li>
      <a href="../articles/svn-helpers.html">SVN Helpers</a>
    </li>
  </ul>
</li>
<li>
  <a href="../news/index.html">Changelog</a>
</li>
      </ul>
<ul class="nav navbar-nav navbar-right">
<li>
  <a href="https://github.com/metrumresearchgroup/review" class="external-link">
    <span class="fa fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
</div>
<!--/.nav-collapse -->
  </div>
<!--/.container -->
</div>
<!--/.navbar -->

      

      </header><div class="row">
  <div class="col-md-9 contents">
    <div class="page-header toc-ignore">
      <h1 data-toc-skip>SVN Helpers</h1>
            
      
      <small class="dont-index">Source: <a href="https://github.com/metrumresearchgroup/review/blob/HEAD/vignettes/svn-helpers.Rmd" class="external-link"><code>vignettes/svn-helpers.Rmd</code></a></small>
      <div class="hidden name"><code>svn-helpers.Rmd</code></div>

    </div>

    
    
<p>This is a vignette to help you become familiar with using
<code><a href="../reference/svnLog.html">svnLog()</a></code> and <code><a href="../reference/svnExport.html">svnExport()</a></code>.</p>
<ul>
<li>
<code><a href="../reference/svnLog.html">svnLog()</a></code> provides the history of all edits made to a
file, including the author, revision and date/time of the commit.</li>
<li>
<code><a href="../reference/svnExport.html">svnExport()</a></code> makes it easy to restore a file to a
previous revision.</li>
</ul>
<p>Below we will go through examples of both, including cases where the
information from <code><a href="../reference/svnLog.html">svnLog()</a></code> can be used to more efficiently
use <code><a href="../reference/svnExport.html">svnExport()</a></code>.</p>
<div class="section level2">
<h2 id="load-libraries">Load libraries<a class="anchor" aria-label="anchor" href="#load-libraries"></a>
</h2>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://github.com/metrumresearchgroup/review" class="external-link">review</a></span><span class="op">)</span></span></code></pre></div>
</div>
<div class="section level2">
<h2 id="svnlog">svnLog<a class="anchor" aria-label="anchor" href="#svnlog"></a>
</h2>
<p>For the purposes of this vignette, a demo SVN repository and files
were created using the <code><a href="../reference/demoRepo.html">demoRepo()</a></code> function. We will look at
the history of <code>script/data-assembly.R</code>.</p>
<p>To figure out when modifications were made to this file, we can use
<code><a href="../reference/svnLog.html">svnLog()</a></code>.</p>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">repo</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/demoRepo.html">demoRepo</a></span><span class="op">(</span><span class="st">"examp-123"</span><span class="op">)</span></span>
<span><span class="fu"><a href="../reference/svnLog.html">svnLog</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/file.path.html" class="external-link">file.path</a></span><span class="op">(</span><span class="va">repo</span>, <span class="st">"script/data-assembly.R"</span><span class="op">)</span><span class="op">)</span></span></code></pre></div>
<pre><code><span><span class="co">## <span style="color: #949494;"># A tibble: 2 × 4</span></span></span>
<span><span class="co">##   author   datetime            rev   msg                 </span></span>
<span><span class="co">##   <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>    <span style="color: #949494; font-style: italic;">&lt;dttm&gt;</span>              <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span> <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>               </span></span>
<span><span class="co">## <span style="color: #BCBCBC;">1</span> michaelm 2024-04-11 <span style="color: #949494;">19:21:12</span> 5     modify data-assembly</span></span>
<span><span class="co">## <span style="color: #BCBCBC;">2</span> michaelm 2024-04-11 <span style="color: #949494;">19:21:11</span> 1     initial commit</span></span></code></pre>
<p>Notice how the output data.frame is sorted such that the most recent
commit is shown on the first row. We can see every author and revision
number where the file was modified and checked into SVN.</p>
</div>
<div class="section level2">
<h2 id="svnexport">svnExport<a class="anchor" aria-label="anchor" href="#svnexport"></a>
</h2>
<p>Now that we know the revision numbers, we can use
<code><a href="../reference/svnExport.html">svnExport()</a></code> to view any of the previous revisions. First we
can look at what the current version of
<code>script/data-assembly.R</code> looks like:</p>
<div class="sourceCode" id="cb4"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/base/cat.html" class="external-link">cat</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/readLines.html" class="external-link">readLines</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/file.path.html" class="external-link">file.path</a></span><span class="op">(</span><span class="va">repo</span>, <span class="st">"script/data-assembly.R"</span><span class="op">)</span><span class="op">)</span>, sep <span class="op">=</span> <span class="st">"\n"</span><span class="op">)</span></span></code></pre></div>
<pre><code><span><span class="co">## library(tidyverse)</span></span>
<span><span class="co">## source(here::here("script", "data-assembly", "da-functions.R"))</span></span>
<span><span class="co">## src_abc &lt;- mrgda::read_src_dir(here::here("data", "source", "STUDY-ABC"))</span></span>
<span><span class="co">## derived &lt;- list(sl = list(),tv = list())</span></span>
<span><span class="co">## dm_0 &lt;- src_abc$dm %&gt;% filter(ACTARM != "Screen Failure")</span></span>
<span><span class="co">## derived$sl$dm &lt;- dm_0</span></span>
<span><span class="co">## pk_0 &lt;- src_abc$pc %&gt;% filter(PCTEST == "TEST OF INTEREST")</span></span>
<span><span class="co">## derived$tv$pc &lt;- pk_0</span></span>
<span><span class="co">## ex_1 &lt;- src_abc$ex %&gt;% filter(EXTRT == "DRUG OF INTEREST")</span></span>
<span><span class="co">## derived$tv$dosing &lt;- ex_1</span></span></code></pre>
<p>Then, we can use <code><a href="../reference/svnExport.html">svnExport()</a></code> to view the first revision
of the file.</p>
<div class="sourceCode" id="cb6"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/svnExport.html">svnExport</a></span><span class="op">(</span>.file <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/file.path.html" class="external-link">file.path</a></span><span class="op">(</span><span class="va">repo</span>, <span class="st">"script/data-assembly.R"</span><span class="op">)</span>, .revision <span class="op">=</span> <span class="fl">1</span><span class="op">)</span></span></code></pre></div>
<p>Notice how this creates a new file, <code>data-assembly-1.R</code> in
the SVN directory.</p>
<div class="sourceCode" id="cb7"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/base/files.html" class="external-link">file.exists</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/file.path.html" class="external-link">file.path</a></span><span class="op">(</span><span class="va">repo</span>, <span class="st">"data-assembly-1.R"</span><span class="op">)</span><span class="op">)</span></span></code></pre></div>
<pre><code><span><span class="co">## [1] TRUE</span></span></code></pre>
<p>Now we can take a look at the first revision of the file.</p>
<div class="sourceCode" id="cb9"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/base/cat.html" class="external-link">cat</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/readLines.html" class="external-link">readLines</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/file.path.html" class="external-link">file.path</a></span><span class="op">(</span><span class="va">repo</span>, <span class="st">"data-assembly-1.R"</span><span class="op">)</span><span class="op">)</span>, sep <span class="op">=</span> <span class="st">"\n"</span><span class="op">)</span></span></code></pre></div>
<pre><code><span><span class="co">## library(tidyverse)</span></span>
<span><span class="co">## src_abc &lt;- mrgda::read_src_dir(here::here("data", "source", "STUDY-ABC"))</span></span>
<span><span class="co">## derived &lt;- list(sl = list(),tv = list())</span></span>
<span><span class="co">## dm_0 &lt;- src_abc$dm %&gt;% filter(ACTARM != "Screen Failure")</span></span>
<span><span class="co">## derived$sl$dm &lt;- dm_0</span></span></code></pre>
<p>This process can be done for any file that has been checked into your
SVN repository. <code><a href="../reference/svnLog.html">svnLog()</a></code> can easily identify the revision
numbers of past edits and <code><a href="../reference/svnExport.html">svnExport()</a></code> can restore the file
with a file name following this syntax [{original file name}-{revision
number}].</p>
</div>
  </div>

  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">

        <nav id="toc" data-toggle="toc"><h2 data-toc-skip>Contents</h2>
    </nav>
</div>

</div>



      <footer><div class="copyright">
  <p></p>
<p>Developed by Eric Anderson, Michael McDermott, Tim Bergsma.</p>
</div>

<div class="pkgdown">
  <p></p>
<p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.8.</p>
</div>

      </footer>
</div>

  


  

  </body>
</html>
